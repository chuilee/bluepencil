<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>微信开发 | BluePencil</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="好记性不如一只烂笔头">
    
    <link rel="preload" href="/assets/css/0.styles.d4b0033f.css" as="style"><link rel="preload" href="/assets/js/app.f54eb369.js" as="script"><link rel="preload" href="/assets/js/2.1af9d8a9.js" as="script"><link rel="preload" href="/assets/js/23.eb1cbf1b.js" as="script"><link rel="prefetch" href="/assets/js/10.b799369a.js"><link rel="prefetch" href="/assets/js/11.db7ce60c.js"><link rel="prefetch" href="/assets/js/12.324e4303.js"><link rel="prefetch" href="/assets/js/13.e5075d95.js"><link rel="prefetch" href="/assets/js/14.8effee86.js"><link rel="prefetch" href="/assets/js/15.b13a03f1.js"><link rel="prefetch" href="/assets/js/16.20f68bd9.js"><link rel="prefetch" href="/assets/js/17.b6761f8e.js"><link rel="prefetch" href="/assets/js/18.2309affc.js"><link rel="prefetch" href="/assets/js/19.370699d4.js"><link rel="prefetch" href="/assets/js/20.a36f38a8.js"><link rel="prefetch" href="/assets/js/21.2005cde5.js"><link rel="prefetch" href="/assets/js/22.3c344bf5.js"><link rel="prefetch" href="/assets/js/24.fba39f00.js"><link rel="prefetch" href="/assets/js/25.ae5e50eb.js"><link rel="prefetch" href="/assets/js/26.6324d4f4.js"><link rel="prefetch" href="/assets/js/27.40789332.js"><link rel="prefetch" href="/assets/js/28.25db1031.js"><link rel="prefetch" href="/assets/js/3.7dc9534f.js"><link rel="prefetch" href="/assets/js/4.31a58c5d.js"><link rel="prefetch" href="/assets/js/5.3e6e316d.js"><link rel="prefetch" href="/assets/js/6.d9d71054.js"><link rel="prefetch" href="/assets/js/7.251e4faf.js"><link rel="prefetch" href="/assets/js/8.2d502945.js"><link rel="prefetch" href="/assets/js/9.6005f9c1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d4b0033f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/icon-folder.png" alt="BluePencil" class="logo"> <span class="site-name can-hide">BluePencil</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/frontend/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/backend/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/note/" class="nav-link">
  读书笔记
</a></div><div class="nav-item"><a href="/resource/" class="nav-link">
  优质资源
</a></div><div class="nav-item"><a href="https://github.com/chuilee" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/frontend/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/backend/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/note/" class="nav-link">
  读书笔记
</a></div><div class="nav-item"><a href="/resource/" class="nav-link">
  优质资源
</a></div><div class="nav-item"><a href="https://github.com/chuilee" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端技术</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/" aria-current="page" class="sidebar-link">前端技术</a></li><li><a href="/frontend/typescript.html" class="sidebar-link">typescript</a></li><li><a href="/frontend/vue.html" class="sidebar-link">vue</a></li><li><a href="/frontend/wechat.html" aria-current="page" class="active sidebar-link">微信开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/wechat.html#用户体验" class="sidebar-link">用户体验</a></li><li class="sidebar-sub-header"><a href="/frontend/wechat.html#开放sdk问题" class="sidebar-link">开放SDK问题</a></li><li class="sidebar-sub-header"><a href="/frontend/wechat.html#" class="sidebar-link"></a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="微信开发"><a href="#微信开发" class="header-anchor">#</a> 微信开发</h1> <h2 id="用户体验"><a href="#用户体验" class="header-anchor">#</a> 用户体验</h2> <h3 id="iphone-x-兼容底部位置"><a href="#iphone-x-兼容底部位置" class="header-anchor">#</a> iPhone X 兼容底部位置</h3> <blockquote><p>对于 position: fixed 的可交互组件，如果渲染在 iPhone X 的安全区域外，容易误触 Home Indicator，应当把可交互的部分都渲染到安全区域内。
建议使用以下 wxss 进行兼容</p></blockquote> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token function">constant</span><span class="token punctuation">(</span>safe-area-inset-bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token function">env</span><span class="token punctuation">(</span>safe-area-inset-bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="video全屏状态下视频没有铺满屏幕"><a href="#video全屏状态下视频没有铺满屏幕" class="header-anchor">#</a> video全屏状态下视频没有铺满屏幕</h3> <ul><li>给<code>&lt;video&gt;</code>写定宽高后，在安卓全屏状态下会导致视频在左上角展开，保持着之前写定的宽高，而没有实现真正全屏。</li> <li>通过CSS实现全屏，只需要在video外部套一个<code>&lt;div class=&quot;videoWrap&quot;&gt;</code>，然后把原本需要的宽高写在videoWrap上，对于<code>&lt;video&gt;</code>我们只要给一个{width:100%}，不需要写定高度。这样就不会出现因为<code>&lt;video&gt;</code>写定宽高而导致全屏不能真正铺满屏幕。</li></ul> <h3 id="微信小程序使用webview跳h5页面之后-设置屏幕是否横屏"><a href="#微信小程序使用webview跳h5页面之后-设置屏幕是否横屏" class="header-anchor">#</a> 微信小程序使用webview跳h5页面之后，设置屏幕是否横屏</h3> <blockquote><p>page.json下设置 <code>&quot;pageOrientation&quot;: &quot;auto&quot;</code></p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>

  <span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token property">&quot;navigationBarBackgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#000&quot;</span><span class="token punctuation">,</span>

  <span class="token property">&quot;navigationBarTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span>

  <span class="token property">&quot;pageOrientation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;auto&quot;</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="page-container组件显示时没有动画效果"><a href="#page-container组件显示时没有动画效果" class="header-anchor">#</a> page-container组件显示时没有动画效果？</h3> <p>需要添加bindenter事件监听，即使我们在实际业务中无需监听；</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>page<span class="token operator">-</span>container 
	show<span class="token operator">=</span><span class="token string">&quot;{{showRanking}}&quot;</span>
	bindenter<span class="token operator">=</span><span class="token string">&quot;onEnter&quot;</span>
	bindclickoverlay<span class="token operator">=</span><span class="token string">&quot;toggleShowRanking&quot;</span>
  \<span class="token operator">&gt;</span>
</code></pre></div><h3 id="官方组件默认样式修改的对应class"><a href="#官方组件默认样式修改的对应class" class="header-anchor">#</a> 官方组件默认样式修改的对应class</h3> <h4 id="swiper"><a href="#swiper" class="header-anchor">#</a> swiper</h4> <p>面板指示点：</p> <div class="language-scss extra-class"><pre class="language-scss"><code>.wx-swiper-dots.wx-swiper-dots-horizontal｛

margin：20px <span class="token comment">//调整位置</span>

｝

.wx-swiper-dot｛｝<span class="token comment">//指示点未选中样式</span>

.wx-swiper-dot-active｛｝<span class="token comment">//指示点选中样式</span>
</code></pre></div><h4 id="button"><a href="#button" class="header-anchor">#</a> button</h4> <p>去除边框：</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token selector">button::after </span><span class="token punctuation">{</span> <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><h4 id="checkbox"><a href="#checkbox" class="header-anchor">#</a> checkbox</h4> <div class="language-scss extra-class"><pre class="language-scss"><code>.wx-checkbox-input｛｝<span class="token comment">//未选中的框</span>

.wx-checkbox-input.wx-checkbox-input-checked｛｝<span class="token comment">//选中的框</span>

.wx-checkbox-input.<span class="token property">wx-checkbox-input-checked</span><span class="token punctuation">:</span><span class="token punctuation">:</span>before｛｝<span class="token comment">//选中的框里的小勾</span>
</code></pre></div><h4 id="radio"><a href="#radio" class="header-anchor">#</a> radio</h4> <div class="language-scss extra-class"><pre class="language-scss"><code>.wx-radio-input｛｝<span class="token comment">// 未选中</span>

.wx-radio-input.wx-radio-input-checked｛｝<span class="token comment">//选中</span>

.wx-radio-input.<span class="token property">wx-radio-input-checked</span><span class="token punctuation">:</span><span class="token punctuation">:</span>before｛｝<span class="token comment">//选中的小勾</span>
</code></pre></div><h4 id="progress"><a href="#progress" class="header-anchor">#</a> progress</h4> <div class="language-scss extra-class"><pre class="language-scss"><code>.wx-progress-inner-bar｛｝<span class="token comment">//已选择的进度条</span>
</code></pre></div><h4 id="switch"><a href="#switch" class="header-anchor">#</a> switch</h4> <div class="language-scss extra-class"><pre class="language-scss"><code>.wx-switch-input｛｝<span class="token comment">//</span>
</code></pre></div><h3 id="wxss下媒体查询不支持rpx单位"><a href="#wxss下媒体查询不支持rpx单位" class="header-anchor">#</a> WXSS下媒体查询不支持rpx单位</h3> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token atrule"><span class="token rule">@media</span> screen <span class="token operator">and</span> <span class="token punctuation">(</span><span class="token property">max-height</span><span class="token punctuation">:</span> 750px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>  <span class="token comment">// 媒体查询不支rpx</span>
  <span class="token selector">h1 </span><span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>  <span class="token comment">// 样式单位可以支持rpx</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="开放sdk问题"><a href="#开放sdk问题" class="header-anchor">#</a> 开放SDK问题</h2> <h3 id="使用sdk进行文档预览转html-添加水印时会出现乱码或者字母丢失的问题"><a href="#使用sdk进行文档预览转html-添加水印时会出现乱码或者字母丢失的问题" class="header-anchor">#</a> 使用sdk进行文档预览转html，添加水印时会出现乱码或者字母丢失的问题？</h3> <ul><li><a href="https://cloud.tencent.com/document/product/436/59407" target="_blank" rel="noopener noreferrer">SDK文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://cloud.tencent.com/developer/article/1026316" target="_blank" rel="noopener noreferrer">URL安全的Base64编码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>腾讯云提供的规则文档写的<a href="https://cloud.tencent.com/document/product/460/32832#.E4.BB.80.E4.B9.88.E6.98.AF-url-.E5.AE.89.E5.85.A8.E7.9A.84-base64-.E7.BC.96.E7.A0.81.EF.BC.9F" target="_blank" rel="noopener noreferrer">url安全编码文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中的第三点是错误的</p> <blockquote><h5 id="什么是-url-安全的-base64-编码"><a href="#什么是-url-安全的-base64-编码" class="header-anchor">#</a> 什么是 URL 安全的 BASE64 编码？</h5> <p>在数据万象的处理操作中，有很多参数需要进行 URL 安全的 BASE64 编码，例如文字水印的文字内容、颜色、字体设置和图片水印的水印图链接。URL 安全的 BASE64 编码具体规则为：</p> <ol><li>将普通 BASE64 编码结果中的加号（+）替换成连接号（-）；</li> <li>将编码结果中的正斜线（/）替换成下划线（_）；</li> <li>保留编码结果中末尾的全部等号（=）。<strong>是错误的，应该要去除末尾等号</strong></li></ol></blockquote> <p>具体可查看规则文档<a href="https://cloud.tencent.com/document/product/460/32832#.E4.BB.80.E4.B9.88.E6.98.AF-url-.E5.AE.89.E5.85.A8.E7.9A.84-base64-.E7.BC.96.E7.A0.81.EF.BC.9F" target="_blank" rel="noopener noreferrer">url安全编码文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 描述如下：</p> <blockquote><p>采用一种<strong>用于URL的改进Base64</strong>编码，它不在末尾填充'='号，并将标准Base64中的「+」和「/」分别改成了「*」和「-」，这样就免去了在URL编解码和数据库存储时所要作的转换，避免了编码信息长度在此过程中的增加，并统一了数据库、表单等处对象标识符的格式。</p> <p>URL安全的Base64编码适用于以URL方式传递Base64编码结果的场景。该编码方式的基本过程是先将内容以Base64格式编码为字符串，然后检查该结果字符串，将字符串中的加号<code>+</code>换成中划线<code>-</code>，并且将斜杠<code>/</code>换成下划线<code>_</code>。</p> <p>详细编码规范请参考<a href="http://www.ietf.org/rfc/rfc4648.txt" target="_blank" rel="noopener noreferrer">RFC4648<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>标准中的相关描述。</p></blockquote> <h2 id=""><a href="#" class="header-anchor">#</a></h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend/vue.html" class="prev">
        vue
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f54eb369.js" defer></script><script src="/assets/js/2.1af9d8a9.js" defer></script><script src="/assets/js/23.eb1cbf1b.js" defer></script>
  </body>
</html>
